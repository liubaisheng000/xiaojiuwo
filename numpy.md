## numpy

#### 简介

​	numpy是Python语言的一个扩展程序库，支持大量的维度数组和矩阵运算，也针对数组运算提供大量数学函数库。

​	numpy是基于C语言开发，这使得numpy的运行速度很快，高效率是numpy的一大优势。

#### 数组属性

1、

2、

3、

4、

5、

6、

7、

#### 常用操作

##### 1、生成数组

```
In [1]: import numpy as np  
```

```
In [2]: a = np.array([[1,2,3]],dtype=np.int32)
In [3]: a
Out[3]: array([1, 2, 3]) 
```

##### 2、生成矩阵

```
In [2]: data = np.array([[1,2,3],[4,5,6],[7,8,9]]) # 等价于data=np.arange(1，10).reshape(3,3)
In [3]: data
Out[3]:
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]]) 
```

##### 3、查看矩阵信息

```
In [6]: data.shape    # 返回元组，表示n行n列
Out[6]: (3, 3)

In [7]: data.dtype    # 返回数组数据类型
Out[7]: dtype('int32')

In [8]: data.ndim    # 返回是几维数组
Out[8]: 2 
```

4、转换数据类型

```
In [11]: a = data.astype(float)    # 拷贝一份新的数组

In [12]: a.dtype
Out[12]: dtype('float64')
```

##### 5、数组间计算

```
In [2]: data = np.array([[1,2,3],[4,5,6],[7,8,9]])

In [3]: data + data		#矩阵相加
Out[3]:
array([[ 2,  4,  6],
       [ 8, 10, 12],
       [14, 16, 18]])
       
In [4]: data*data		#矩阵平方
Out[4]:
array([[ 1,  4,  9],
       [16, 25, 36],
       [49, 64, 81]])

In [5]: data@data		#矩阵相乘
Out[5]:
array([[ 30,  36,  42],
       [ 66,  81,  96],
       [102, 126, 150]])
```

##### 6、数组切片

```
In [2]: data[:2]    # 沿着行(axis=0)进行索引
Out[2]:
array([[1, 2, 3],
       [4, 5, 6]])

In [3]: data[:2,:2]    # 先沿着行(axis=0)进行索引，再沿着列(axis=1)进行索引
Out[3]:
array([[1, 2],
       [4, 5]])

In [4]: data[1,0:2]    # 下标是从0开始
Out[4]: array([4, 5])
```

​	这里需要注意的是，**切片操作是在原始数组上创建一个视图view，这只是访问数组数据的一种方式。 因此原始数组不会被复制到内存中**，传递的是一个类似引用的东西，与上面的astype（）方法是两种不同的拷贝方式，这里我们来看一个例子：

```
In [2]: a = data[1]

In [3]: a
Out[3]: array([4, 5, 6])

In [4]: a[:] = 0

In [5]: data
Out[5]:
array([[1, 2, 3],
       [0, 0, 0],
       [7, 8, 9]])
```

##### 7、copy()方法进行浅拷贝

```
In [2]: a = data[1].copy()
In [3]: a
Out[3]: array([0, 0, 0])

In [4]: a[:]=9

In [5]: data
Out[5]:
array([[1, 2, 3],
       [0, 0, 0],
       [7, 8, 9]])
```

##### 8、数组的布尔索引

```
In [2]: data
Out[2]:
array([[1, 2, 3],
       [4, 5, 6],
       [7, 8, 9]])

In [3]: data>3
Out[3]:
array([[False, False, False],
       [ True,  True,  True],
       [ True,  True,  True]])

In [4]: data[data>3]    # 找出大于3的元素
Out[4]: array([4, 5, 6, 7, 8, 9])
```

##### 9、数组逻辑表达处理

```
In [2]: np.where(data>3,1,0)    # 大于3的标记为1，小于等于3的标记为0
Out[2]:
array([[0, 0, 0],
       [1, 1, 1],
       [1, 1, 1]])
```

##### 10、常用统计操作

```
In [2]: data.mean(axis=0)    # 沿着行(axis=0)进行索引，求出其平均值
Out[2]: array([4., 5., 6.])

In [3]: data.std()    # 求出全部元素的方差
Out[3]: 2.581988897471611

In [4]: (data>3).sum()    # 统计数组中元素大于3的个数
Out[4]: 6

In [5]: data.any()    # 数组中是否存在一个或多个true
Out[5]: True

In [6]: data.all()    # 数组中是否全部数都是true
Out[6]: True

In [7]: data.cumsum(axis=0)    # 沿着行(axis=0)进行索引，进行累加
Out[7]:
array([[ 1,  2,  3],
       [ 5,  7,  9],
       [12, 15, 18]], dtype=int32)

In [8]: data.cumprod(axis=1)    # 沿着列(axis=1)进行索引，进行累乘
Out[8]:
array([[  1,   2,   6],
       [  4,  20, 120],
       [  7,  56, 504]], dtype=int32)
```

##### 11、数组排序

```
In [2]: data=np.random.randn(3,3)
In [3]: data
Out[3]: 
array([[ 1.6950104 , -1.11034044,  1.03490141],
       [ 0.22616027, -2.49843583,  1.04056975],
       [ 0.35133544,  0.31314749, -1.53910184]])
       
In [4]: data.sort(axis=0)    # 沿着行(axis=0)进行索引，并进行升序排序
In [5]: data
Out[5]:
array([[ 0.22616027, -2.49843583, -1.53910184],
       [ 0.35133544, -1.11034044,  1.03490141],
       [ 1.6950104 ,  0.31314749,  1.04056975]])
       
In [6]: data[::-1]    # 降序操作
Out[6]:
array([[ 1.6950104 ,  0.31314749,  1.04056975],
       [ 0.35133544, -1.11034044,  1.03490141],
       [ 0.22616027, -2.49843583, -1.53910184]])
```

